# A tool to generate `compile_commands.json`

[`compile_commands.json`](http://clang.llvm.org/docs/JSONCompilationDatabase.html)
is a file used by [Clang](http://clang.llvm.org/) tools such as
[ClangCheck](http://clang.llvm.org/docs/ClangCheck.html),
[atom-clang-linter](https://atom.io/packages/linter-clang).
It is a database descriing the options passed to compile each file in a project.
This file can be generated by recent version of [cmake](http://www.cmake.org/)
with `CMAKE_EXPORT_COMPILE_COMMANDS` or [bear](https://github.com/rizsotto/Bear).

However, sometimes you want another solution. For example, cmake does not
generate any entry for .h files. It might be useful to have entries for the
header files as well.

## gen_compile_commands

This tool generate the JSON file from a simpler YAML supporting globbing file:

~~~
---
- pattern:
  - "**/*.{h,hpp}"
  - "**/*.cpp"
  command: clang++ -x c++ -std=c++11 -c
- pattern: "**/*.c"
  command: clang -std=gnu11 -c
---
~~~

Usage:

~~~
gen_compile_commands compile_commands.yaml > compile_commands.json
~~~

This will generate a file looking like this:

~~~
[
  {
    "file": "src/foo.h",
    "command": "clang++ -x c++ -std=c++11 -c src/foo.h"
  },
  {
    "file": "src/foo.cpp",
    "command": "clang++ -x c++ -std=c++11 -c src/foo.cpp"
  },
  {
    "file": "src/foo.c",
    "command": "clang -std=gnu+11 -c src/foo.c"
  }
]
~~~

## TODO list

* variable definition and variable expansion (will change the YAML format)
